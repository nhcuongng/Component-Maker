import glob from"glob";import{minify}from"terser";import{mkdirSync,readFileSync,writeFileSync}from"fs";const cwd=process.cwd(),globOptions={ignore:["**/node_modules/**"]},minifyOptions={compress:!0,mangle:!0};glob("**/*.mjs",globOptions,((i,o)=>{o.map((async i=>{const o=`${cwd}/${i.replace("src","lib")}`,e=o.slice(0,o.lastIndexOf("/")),r=readFileSync(i,"utf8"),n=await minify(r,minifyOptions);mkdirSync(e,{recursive:!0},(i=>{if(i)throw i})),writeFileSync(o,n.code)}))}));